(e=>{"function"==typeof define&&define.amd?define(["jquery","./grid.base"],e):e(jQuery)})(function(c){c.jgrid.extend({transposeSetup:function(t,e){var s=[],i=[],l=!1,d=c.extend({},e||{});return this.each(function(){var e,r,o=Object.keys(t[d.baseindex]);d.excludeSrcCols.length&&(o=o.filter(function(e){return!d.excludeSrcCols.includes(e)}));for(var a=0;a<o.length;a++){r=0,(e={}).col_name=o[a],l||s.push({name:"col_name"}),r++;for(var n=0;n<t.length;n++)e[d.nameprefix+r]=t[n][o[a]],l||s.push({name:d.nameprefix+r,label:d.labelprefix+r}),r++;l=!0,i.push(e)}}),{colModel:s,rows:i}},jqTranspose:function(o,i,l,a){return i=c.extend({nameprefix:"col",labelprefix:"value ",baseindex:0,beforeCreateGrid:null,RowAsHeader:0,loadMsg:!1,excludeSrcCols:[]},i||{}),this.each(function(){var s=this,e=l&&l.regional?l.regional:"en";function r(e,r){Array.isArray(e)||(e=[]);var o=jQuery(s).jqGrid("transposeSetup",e,i);if(c.jgrid.isFunction(i.beforeCreateGrid)&&i.beforeCreateGrid.call(s,o,e),!1!==r.RowAsHeader&&0<=r.RowAsHeader&&o.rows.length&&r.RowAsHeader<o.rows.length){var a,n=o.rows[r.RowAsHeader],t=0;for(a in n)Object.prototype.hasOwnProperty.call(n,a)&&(o.colModel[t].label=n[a]),t++;o.rows.splice(r.RowAsHeader,1)}e=c.jgrid.from.call(s,o.rows);jQuery(s).jqGrid(c.extend(!0,{datastr:e.select(),datatype:"jsonstring",colModel:o.colModel,jsonReader:{repeatitems:!1},viewrecords:!0},l||{})),i.loadMsg&&c(".loading_pivot").remove()}i.loadMsg&&c("<div class='loading_pivot ui-state-default ui-state-active row'>"+c.jgrid.getRegional(s,"regional."+e+".defaults.loadtext")+"</div>").insertBefore(s).show(),"string"==typeof o?c.ajax(c.extend({url:o,dataType:"json",success:function(e){r(c.jgrid.getAccessor(e,a&&a.reader?a.reader:"rows"),i)}},a||{})):r(o,i)})}})});