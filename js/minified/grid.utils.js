(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(c){c.extend(c.jgrid,{isJSON:function(e){"string"!=typeof e&&(e=JSON.stringify(e));try{return JSON.parse(e),!0}catch(e){return!1}},stringify:function(e){return JSON.stringify(e,function(e,n){return"function"==typeof n?n.toString():n})},resolveFunctions:function(e,n){if("string"==typeof e&&e.startsWith("__fn_"))return window["functionRegistry_"+n][e];if(Array.isArray(e))return e.map(c.jgrid.resolveFunctions);if(e&&"object"==typeof e){var t,r,o={};for([t,r]of Object.entries(e))o[t]=c.jgrid.resolveFunctions(r,n);return o}return e},parseFunc:function(e,n){n=n||{};let a={};let t;try{t=JSON.parse(e)}catch(e){return void alert("Invalid JSON.")}var r,o,i,e=function e(n){var t;if("string"==typeof n&&n.trim().startsWith("function"))return t=`__fn_${c.jgrid.randId()}__`,a[t]=n,t;if(Array.isArray(n))return n.map(e);if(n&&"object"==typeof n){var r,o,i={};for([r,o]of Object.entries(n))i[r]=e(o);return i}return n}(t);return c.isEmptyObject(a)?e:(o=Object.entries(a).map(([e,n])=>`  "${e}": ${n},`),o=`var functionRegistry_${r=c.jgrid.randId()} = {
${o.join("\n")}
};`,i=document.createElement("script"),n&&n.nonce&&(i.nonce=n.nonce),i.text=o,document.body.appendChild(i),c.jgrid.resolveFunctions(e,r))},encode:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(e,n){var d=c.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},n||{}),f=this,u=function(e,n){return"#text"===e?d.encode?f.encode(n):n:"function"==typeof n?"<"+e+"><![CDATA["+n+"]]></"+e+">\n":""===n?"<"+e+">__EMPTY_STRING_</"+e+">\n":"<"+e+">"+(d.encode?f.encode(n):n)+"</"+e+">\n"},l=function(e,n){for(var t=[],r=0;r<n.length;r++){var o=n[r];void 0===o||null==o?t[t.length]="<"+e+" />":"object"==typeof o&&o.constructor==Array?t[t.length]=l(e,o):t[t.length]=("object"==typeof o?s:u)(e,o)}return t.length||(t[0]="<"+e+">__EMPTY_ARRAY_</"+e+">\n"),t.join("")},s=function(e,n){var t,r,o=[],i=[];for(t in n)n.hasOwnProperty(t)&&(r=n[t],t.charAt(0)!==d.attr_prefix?null==r?o[o.length]="<"+t+" />":"object"==typeof r&&r.constructor===Array?o[o.length]=l(t,r):o[o.length]=("object"==typeof r?s:u)(t,r):i[i.length]=" "+t.substring(1)+'="'+(d.encode?f.encode(r):r)+'"');var a=i.join(""),c=o.join("");return c=null!=e?0<o.length?c.match(/\n/)?"<"+e+a+">\n"+c+"</"+e+">\n":"<"+e+a+">"+c+"</"+e+">\n":"<"+e+a+" />\n":c},n=s(null,e);return d.xmlDecl+n},xmlToJSON:function(e,n,i){var d=c.extend({force_array:[],attr_prefix:"-"},n||{});if(e){var a={};if(d.force_array)for(var t=0;t<d.force_array.length;t++)a[d.force_array[t]]=1;(e="string"==typeof e?c.parseXML(e):e).documentElement&&(e=e.documentElement);var r,f=function(e,n,t,r){if("string"==typeof r)if(r.trim().startsWith("function")){var o="__fn__"+c.jgrid.randId();i[o]=r,r=o}else switch(r){case"__EMPTY_ARRAY_":r=[];break;case"__EMPTY_STRING_":r="";break;case"false":r=!1;break;case"true":r=!0}a[n]?(1===t&&(e[n]=[]),e[n][e[n].length]=r):1===t?e[n]=r:2===t?e[n]=[e[n],r]:e[n][e[n].length]=r},u=function(e){if(7!==e.nodeType){if(3===e.nodeType||4===e.nodeType)return null==e.nodeValue.match(/[^\x00-\x20]/)?void 0:e.nodeValue;var n,t,r,o={};if(e.attributes&&e.attributes.length)for(n={},a=0;a<e.attributes.length;a++)"string"==typeof(t=e.attributes[a].nodeName)&&(r=e.attributes[a].nodeValue)&&(void 0===o[t=d.attr_prefix+t]&&(o[t]=0),o[t]++,f(n,t,o[t],r));if(e.childNodes&&e.childNodes.length){for(var i=n?!1:!0,a=0;a<e.childNodes.length&&i;a++){var c=e.childNodes[a].nodeType;3!==c&&4!==c&&(i=!1)}if(i)for(n=n||"",a=0;a<e.childNodes.length;a++)n+=e.childNodes[a].nodeValue;else for(n=n||{},a=0;a<e.childNodes.length;a++)"string"==typeof(t=e.childNodes[a].nodeName)&&(r=u(e.childNodes[a]))&&(void 0===o[t]&&(o[t]=0),o[t]++,f(n,t,o[t],r))}return n}},n=u(e);return a[e.nodeName]&&(n=[n]),11!==e.nodeType&&((r={})[e.nodeName]=n,n=r),n}},saveAs:function(e,n,t){t=c.extend(!0,{type:"plain/text;charset=utf-8"},t||{});var r,o,i,a=[];n=null==n||""===n?"jqGridFile.txt":n,Array.isArray(e)?a=e:a[0]=e;try{r=new File(a,n,t)}catch(e){r=new Blob(a,t)}window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(r,n):(o=URL.createObjectURL(r),(i=document.createElement("a")).href=o,i.download=n,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)},0))},csvToArray:function(e,n){void 0===n&&(n=",");for(var t,r,o=[],i=[],a={},c=0,d=0,f=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi");t=f.exec(e);){var u=t[1];u.length&&u!==n&&(d++,a={},c=0),u=t[2]?t[2].replace(new RegExp('""',"g"),'"'):t[3],0===d?(o.push(u),r=o.length):(a[o[c]]=u,c===r-1?i.push(a):c++)}return i}})});