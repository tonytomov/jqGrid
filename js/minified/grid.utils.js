(e=>{"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(c){c.extend(c.jgrid,{isJSON:function(e){"string"!=typeof e&&(e=JSON.stringify(e));try{return JSON.parse(e),!0}catch(e){return!1}},stringify:function(e){return JSON.stringify(e,function(e,n){return"function"==typeof n?n.toString():n})},parseFunc:function(e){return JSON.parse(e,function(e,n){var t;return"string"==typeof n&&-1!==n.indexOf("function")&&((t=n.split(" "))[0]=c.jgrid.trim(t[0].toLowerCase()),0===t[0].indexOf("function"))&&"}"===n.trim().slice(-1)?c.jgrid.runCode(n):n})},encode:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},jsonToXML:function(e,n){var d=c.extend({xmlDecl:'<?xml version="1.0" encoding="UTF-8" ?>\n',attr_prefix:"-",encode:!0},n||{}),l=this,f=function(e,n){return"#text"===e?d.encode?l.encode(n):n:"function"==typeof n?"<"+e+"><![CDATA["+n+"]]></"+e+">\n":""===n?"<"+e+">__EMPTY_STRING_</"+e+">\n":"<"+e+">"+(d.encode?l.encode(n):n)+"</"+e+">\n"},u=function(e,n){for(var t=[],r=0;r<n.length;r++){var o=n[r];void 0===o||null==o?t[t.length]="<"+e+" />":"object"==typeof o&&o.constructor==Array?t[t.length]=u(e,o):t[t.length]=("object"==typeof o?s:f)(e,o)}return t.length||(t[0]="<"+e+">__EMPTY_ARRAY_</"+e+">\n"),t.join("")},s=function(e,n){var t,r,o=[],i=[];for(t in n)n.hasOwnProperty(t)&&(r=n[t],t.charAt(0)!==d.attr_prefix?null==r?o[o.length]="<"+t+" />":"object"==typeof r&&r.constructor===Array?o[o.length]=u(t,r):o[o.length]=("object"==typeof r?s:f)(t,r):i[i.length]=" "+t.substring(1)+'="'+(d.encode?l.encode(r):r)+'"');var a=i.join(""),c=o.join("");return c=null!=e?0<o.length?c.match(/\n/)?"<"+e+a+">\n"+c+"</"+e+">\n":"<"+e+a+">"+c+"</"+e+">\n":"<"+e+a+" />\n":c},n=s(null,e);return d.xmlDecl+n},xmlToJSON:function(e,n){var d=c.extend({force_array:[],attr_prefix:"-"},n||{});if(e){var o={};if(d.force_array)for(var t=0;t<d.force_array.length;t++)o[d.force_array[t]]=1;(e="string"==typeof e?c.parseXML(e):e).documentElement&&(e=e.documentElement);var r,l=function(e,n,t,r){if("string"==typeof r)if(-1!==r.indexOf("function"))r=c.jgrid.runCode(r);else switch(r){case"__EMPTY_ARRAY_":r=[];break;case"__EMPTY_STRING_":r="";break;case"false":r=!1;break;case"true":r=!0}o[n]?(1===t&&(e[n]=[]),e[n][e[n].length]=r):1===t?e[n]=r:2===t?e[n]=[e[n],r]:e[n][e[n].length]=r},f=function(e){if(7!==e.nodeType){if(3===e.nodeType||4===e.nodeType)return null==e.nodeValue.match(/[^\x00-\x20]/)?void 0:e.nodeValue;var n,t,r,o={};if(e.attributes&&e.attributes.length)for(n={},a=0;a<e.attributes.length;a++)"string"==typeof(t=e.attributes[a].nodeName)&&(r=e.attributes[a].nodeValue)&&(void 0===o[t=d.attr_prefix+t]&&(o[t]=0),o[t]++,l(n,t,o[t],r));if(e.childNodes&&e.childNodes.length){for(var i=n?!1:!0,a=0;a<e.childNodes.length&&i;a++){var c=e.childNodes[a].nodeType;3!==c&&4!==c&&(i=!1)}if(i)for(n=n||"",a=0;a<e.childNodes.length;a++)n+=e.childNodes[a].nodeValue;else for(n=n||{},a=0;a<e.childNodes.length;a++)"string"==typeof(t=e.childNodes[a].nodeName)&&(r=f(e.childNodes[a]))&&(void 0===o[t]&&(o[t]=0),o[t]++,l(n,t,o[t],r))}return n}},n=f(e);return o[e.nodeName]&&(n=[n]),11!==e.nodeType&&((r={})[e.nodeName]=n,n=r),n}},saveAs:function(e,n,t){t=c.extend(!0,{type:"plain/text;charset=utf-8"},t||{});var r,o,i,a=[];n=null==n||""===n?"jqGridFile.txt":n,Array.isArray(e)?a=e:a[0]=e;try{r=new File(a,n,t)}catch(e){r=new Blob(a,t)}window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(r,n):(o=URL.createObjectURL(r),(i=document.createElement("a")).href=o,i.download=n,document.body.appendChild(i),i.click(),setTimeout(function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)},0))},csvToArray:function(e,n){void 0===n&&(n=",");for(var t,r,o=[],i=[],a={},c=0,d=0,l=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi");t=l.exec(e);){var f=t[1];f.length&&f!==n&&(d++,a={},c=0),f=t[2]?t[2].replace(new RegExp('""',"g"),'"'):t[3],0===d?(o.push(f),r=o.length):(a[o[c]]=f,c===r-1?i.push(a):c++)}return i}})});