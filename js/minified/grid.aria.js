/**
*
* @license Guriddo jqGrid JS - v5.5.1 
* Copyright(c) 2008, Tony Tomov, tony@trirand.com
* 
* License: http://guriddo.net/?page_id=103334
*/
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base"],a):a(jQuery)}(function(a){"use strict";a.extend(a.jgrid,{focusableElementsList:[">a[href]",">button:not([disabled])",">area[href]",">input:not([disabled])",">select:not([disabled])",">textarea:not([disabled])",">iframe",">object",">embed",">*[tabindex]",">*[contenteditable]"]}),a.jgrid.extend({ariaBodyGrid:function(b){var c=a.extend({onEnterCell:null},b||{});return this.each(function(){function b(a,b){return!isNaN(a)&&!isNaN(b)&&a>=0&&b>=0&&g.rows.length&&a<g.rows.length&&b<g.p.colModel.length}function d(a,c){var d=g.p.iRow+c,e=g.p.iCol+a,f=g.rows.length,h=0!==a;if(!f)return!1;var i=g.p.colModel.length;return h&&(e<0&&d>=2&&(e=i-1,d--),e>=i&&(e=0,d++)),h||(d<1?(e--,d=f-1,g.rows[d]&&e>=0&&!g.rows[d].cells[e]&&d--):(d>=f||!g.rows[d].cells[e])&&(d=1,e++)),b(d,e)?{row:d,col:e}:!!b(g.p.iRow,g.p.iCol)&&{row:g.p.iRow,col:g.p.iCol}}function e(b,c){var e=d(b,c);if(!e)return!1;for(;a(g.rows[e.row].cells[e.col]).is(":hidden");)if(g.p.iRow=e.row,g.p.iCol=e.col,e=d(b,c),g.p.iRow===e.row&&g.p.iCol===e.col)return!1;return 0!==c&&a(g).jqGrid("setSelection",g.rows[e.row].id,!1,null,!1),e}function f(a){var b=g.p.page,c=g.p.lastpage;b+=a,b<=0&&(b=1),b>c&&(b=c),g.p.page!==b&&(g.p.page=b,g.grid.populate())}var g=this,h=a.jgrid.getMethod("getStyleUI"),i=h(g.p.styleUI+".common","highlight",!0),j=a.jgrid.focusableElementsList.join();a(g).removeAttr("tabindex"),a(g).on("jqGridAfterGridComplete.setAriaGrid",function(b){a("tbody:first>tr:not(.jqgfirstrow)>td:not(:hidden, :has("+j+"))",g).attr("tabindex",-1),a("tbody:first>tr:not(.jqgfirstrow)",g).removeAttr("tabindex"),void 0!==g.p.iRow&&void 0!==g.p.iCol&&g.rows[g.p.iRow]&&a(g.rows[g.p.iRow].cells[g.p.iCol]).attr("tabindex",0).focus(function(){a(this).addClass(i)}).blur(function(){a(this).removeClass(i)})}),g.p.iRow=1,g.p.iCol=a.jgrid.getFirstVisibleCol(g);var k=0,l=0;a(g).on("keydown",function(b){if(!g.p.navigationDisabled||!0!==g.p.navigationDisabled){var d,j=b.which||b.keyCode;switch(j){case 38:d=e(0,-1),k=d.row,l=d.col,b.preventDefault();break;case 40:d=e(0,1),k=d.row,l=d.col,b.preventDefault();break;case 37:d=e(-1,0),k=d.row,l=d.col,b.preventDefault();break;case 39:d=e(1,0),k=d.row,l=d.col,b.preventDefault();break;case 36:k=b.ctrlKey?1:g.p.iRow,l=0,b.preventDefault();break;case 35:k=b.ctrlKey?g.rows.length-1:g.p.iRow,l=g.p.colModel.length-1,b.preventDefault();break;case 33:f(-1),l=g.p.iCol,k=g.p.iRow,b.preventDefault();break;case 34:f(1),l=g.p.iCol,k=g.p.iRow,k>g.rows.length-1&&(k=g.rows.length-1,g.p.iRow=g.rows.length-1),b.preventDefault();break;case 13:return void(a.isFunction(c.onEnterCell)&&(c.onEnterCell.call(g,g.rows[g.p.iRow].id,g.p.iRow,g.p.iCol,b),b.preventDefault()));default:return}a(g).jqGrid("focusBodyCell",k,l,h,i)}}),a(g).on("jqGridBeforeSelectRow.ariaGridClick",function(){return!1}),a(g).on("jqGridCellSelect.ariaGridClick",function(b,c,d,e,f){var h=f.target;if(g.p.iRow>0&&g.p.iCol>=0&&a(g.rows[g.p.iRow].cells[g.p.iCol]).attr("tabindex",-1),a(h).is("td")||a(h).is("th")){g.p.iCol=h.cellIndex;var j=a(h).closest("tr.jqgrow");g.p.iRow=j[0].rowIndex,a(h).attr("tabindex",0).addClass(i).focus().blur(function(){a(this).removeClass(i)})}})})},focusBodyCell:function(b,c,d,e){return this.each(function(){function f(b){return a(k,b)[0]}var g,h=this,i=d||a.jgrid.getMethod("getStyleUI"),j=e||i(h.p.styleUI+".common","highlight",!0),k=a.jgrid.focusableElementsList.join();void 0!==b&&void 0!==c?!isNaN(h.p.iRow)&&!isNaN(h.p.iCol)&&h.p.iCol>=0&&(g=f(h.rows[h.p.iRow].cells[h.p.iCol]),g?a(g).attr("tabindex",-1):a(h.rows[h.p.iRow].cells[h.p.iCol]).attr("tabindex",-1)):(b=h.p.iRow,c=h.p.iCol),b=parseInt(b,10),c=parseInt(c,10),b>0&&c>=0&&(g=f(h.rows[b].cells[c]),g?a(g).attr("tabindex",0).addClass(j).focus().blur(function(){a(this).removeClass(j)}):a(h.rows[b].cells[c]).attr("tabindex",0).addClass(j).focus().blur(function(){a(this).removeClass(j)}),h.p.iRow=b,h.p.iCol=c)})},resetAriaBody:function(){return this.each(function(){var b=this;a(b).attr("tabindex","0").off("keydown").off("jqGridBeforeSelectRow.ariaGridClick").off("jqGridCellSelect.ariaGridClick").off("jqGridAfterGridComplete.setAriaGrid");var c=a.jgrid.focusableElementsList.join();a("tbody:first>tr:not(.jqgfirstrow)>td:not(:hidden, :has("+c+"))",b).removeAttr("tabindex").off("focus"),a("tbody:first>tr:not(.jqgfirstrow)",b).attr("tabindex",-1)})},ariaHeaderGrid:function(){return this.each(function(){var b=this,c=a.jgrid.getMethod("getStyleUI"),d=c(b.p.styleUI+".common","highlight",!0),e=a(".ui-jqgrid-hbox>table:first","#gbox_"+b.p.id);a("tr.ui-jqgrid-labels",e).on("keydown",function(c){var d=b.p.selHeadInd,e=c.which||c.keyCode,f=b.grid.headers.length;switch(e){case 37:if(d-1>=0){for(d--;a(b.grid.headers[d].el).is(":hidden")&&d-1>=0&&!(--d<0););d>=0&&(a(b.grid.headers[d].el).focus(),a(b.grid.headers[b.p.selHeadInd].el).attr("tabindex","-1"),b.p.selHeadInd=d,c.preventDefault())}break;case 39:if(d+1<f){for(d++;a(b.grid.headers[d].el).is(":hidden")&&d+1<f&&!(++d>f-1););d<f&&(a(b.grid.headers[d].el).focus(),a(b.grid.headers[b.p.selHeadInd].el).attr("tabindex","-1"),b.p.selHeadInd=d,c.preventDefault())}break;case 13:a("div:first",b.grid.headers[d].el).trigger("click"),c.preventDefault();break;default:return}}),a("tr.ui-jqgrid-labels>th:not(:hidden)",e).attr("tabindex",-1).focus(function(){a(this).addClass(d).attr("tabindex","0")}).blur(function(){a(this).removeClass(d)}),b.p.selHeadInd=a.jgrid.getFirstVisibleCol(b),a(b.grid.headers[b.p.selHeadInd].el).attr("tabindex","0")})},focusHeaderCell:function(b){return this.each(function(){var c=this;void 0===b&&(b=c.p.selHeadInd),b>=0&&b<c.p.colModel.length&&(a(c.grid.headers[c.p.selHeadInd].el).attr("tabindex","-1"),a(c.grid.headers[b].el).focus(),c.p.selHeadInd=b)})},resetAriaHeader:function(){return this.each(function(){var b=a(".ui-jqgrid-hbox>table:first","#gbox_"+this.p.id);a("tr.ui-jqgrid-labels",b).off("keydown"),a("tr.ui-jqgrid-labels>th:not(:hidden)",b).removeAttr("tabindex").off("focus blur")})},ariaPagerGrid:function(){return this.each(function(){var b=this,c=a.jgrid.getMethod("getStyleUI"),d=c(b.p.styleUI+".common","highlight",!0),e="."+c(b.p.styleUI+".common","disabled",!0),f=a(".ui-pg-button",b.p.pager),g=f.length;f.attr("tabindex","-1").focus(function(){a(this).addClass(d)}).blur(function(){a(this).removeClass(d)}),b.p.navIndex=0,setTimeout(function(){var a=f.not(e).first().attr("tabindex","0");b.p.navIndex=a[0].cellIndex?a[0].cellIndex-1:0},100),a("table.ui-pager-table tr:first",b.p.pager).on("keydown",function(c){var d=c.which||c.keyCode,h=b.p.navIndex;switch(d){case 37:if(h-1>=0){for(h--;a(f[h]).is(e)&&h-1>=0&&!(--h<0););h>=0&&(a(f[b.p.navIndex]).attr("tabindex","-1"),a(f[h]).attr("tabindex","0").focus(),b.p.navIndex=h),c.preventDefault()}break;case 39:if(h+1<g){for(h++;a(f[h]).is(e)&&h+1<g+1&&!(++h>g-1););h<g&&(a(f[b.p.navIndex]).attr("tabindex","-1"),a(f[h]).attr("tabindex","0").focus(),b.p.navIndex=h),c.preventDefault()}break;case 13:a(f[h]).trigger("click"),c.preventDefault();break;default:return}})})},focusPagerCell:function(b){return this.each(function(){var c=this,d=a(".ui-pg-button",c.p.pager),e=d.length;void 0===b&&(b=c.p.navIndex),b>=0&&b<e&&(a(d[c.p.navIndex]).attr("tabindex","-1"),a(d[b]).attr("tabindex","0").focus(),c.p.navIndex=b)})},resetAriaPager:function(){return this.each(function(){a(".ui-pg-button",this.p.pager).removeAttr("tabindex").off("focus"),a("table.ui-pager-table tr:first",this.p.pager).off("keydown")})},setAriaGrid:function(b){var c=a.extend({header:!0,body:!0,pager:!0,onEnterCell:null},b||{});return this.each(function(){c.header&&a(this).jqGrid("ariaHeaderGrid"),c.body&&a(this).jqGrid("ariaBodyGrid",{onEnterCell:c.onEnterCell}),c.pager&&a(this).jqGrid("ariaPagerGrid")})},resetAriaGrid:function(b){var c=a.extend({header:!0,body:!0,pager:!0},b||{});return this.each(function(){var b=this;c.body&&a(b).jqGrid("resetAriaBody"),c.header&&a(b).jqGrid("resetAriaHeader"),c.pager&&a(b).jqGrid("resetAriaPager")})}})});